{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function inputPictures({ hits }) {\n  const gallery = document.querySelector('.gallery-container');\n  const hitsList = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<ul class=\"gallery-card\">\n      <li class=\"gallery\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"> \n   <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"270\" height=\"160\"/>\n   </a>\n    <div class=\"discrabe\">\n  <ul class=\"discrabe-list\">\n  <li class=\"discrabe-item\"><b>Likes</b> ${likes}</li>\n  <li class=\"discrabe-item\"><b>Views</b> ${views}</li>\n  <li class=\"discrabe-item\"><b>Comments</b> ${comments}</li>\n  <li class=\"discrabe-item\"><b>Downloads</b> ${downloads}</li>\n  </ul>\n</div>\n</li>\n    </ul>`\n    )\n    .join('');\n  gallery.innerHTML = hitsList;\n\n  if (hits.length === 0) {\n    hideLoading();\n    return errorParams();\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionData: 'alt',\n    captionPosting: 'bottom',\n  }).refresh();\n  hideLoading();\n}\nexport function showLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'flex';\n}\nexport function hideLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'none';\n}\nexport function errorParams() {\n  iziToast.error({\n    title: 'Error',\n    position: 'topRight',\n    title: '',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\nexport function noMoreLoading() {\n  iziToast.warning({\n    title: 'warning',\n    position: 'topRight',\n    title: '',\n    message: 'We are sorry, but you`ve reached the end of search results!',\n    backgroundColor: 'blue',\n    titleColor: 'white',\n    messageColor: 'white',\n  });\n}\n","import axios from 'axios';\n\nexport async function fetchParams(query, page) {\n  let per_page = 15;\n  const params = {\n    key: '44790874-b72b714502b79af1442269c5d',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: per_page,\n    page: page,\n  };\n  try {\n    const response = await axios.get('https://pixabay.com/api/', { params });\n    const data = response.data;\n\n    return data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n","import {\n  inputPictures,\n  showLoading,\n  hideLoading,\n  errorParams,\n  noMoreLoading,\n} from './js/render-functions';\nimport { fetchParams } from './js/pixabay-api';\n\nconst formSearch = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery-container');\nconst loadingButton = document.querySelector('.btn-load');\n\nlet currentQuery = '';\nlet currentPage = 1;\n\nformSearch.addEventListener('submit', getPicturesByValue);\nloadingButton.addEventListener('click', getMorePictures);\n\nasync function getPicturesByValue(evt) {\n  evt.preventDefault();\n  const form = evt.currentTarget;\n  const inputValue = form.elements.inputtext.value.toLowerCase().trim();\n\n  if (inputValue === '') {\n    hideLoading();\n    return errorParams();\n  }\n\n  showLoading();\n  gallery.innerHTML = '';\n  currentQuery = inputValue;\n  currentPage = 1;\n\n  try {\n    const picturesResponse = await fetchParams(currentQuery, currentPage);\n    inputPictures(picturesResponse);\n\n    loadingButton.style.display = 'flex';\n  } catch (err) {\n    errorParams();\n  } finally {\n    form.reset();\n    hideLoading();\n  }\n}\nasync function getMorePictures() {\n  showLoading();\n  currentPage += 1;\n  const totalHits = 60 / 15;\n  try {\n    if (currentPage === totalHits) {\n      loadingButton.style.display = 'none';\n      noMoreLoading();\n    }\n    const picturesResponse = await fetchParams(currentQuery, currentPage);\n    inputPictures(picturesResponse);\n    gallery.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    const pictureItem = document.querySelector('.gallery');\n    let pictureItemSize = pictureItem.getBoundingClientRect();\n    window.scrollBy({\n      top: pictureItemSize.height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    errorParams();\n  } finally {\n    hideLoading();\n  }\n}\n"],"names":["inputPictures","hits","gallery","hitsList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoading","errorParams","SimpleLightbox","showLoading","loading","iziToast","noMoreLoading","fetchParams","query","page","params","axios","error","formSearch","loadingButton","currentQuery","currentPage","getPicturesByValue","getMorePictures","evt","form","inputValue","picturesResponse","totalHits","pictureItemSize"],"mappings":"owBAKO,SAASA,EAAc,CAAE,KAAAC,GAAQ,CACtC,MAAMC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAWF,EACd,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,sCAE8BL,CAAa;AAAA,eACpCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,2CAIEC,CAAK;AAAA,2CACLC,CAAK;AAAA,8CACFC,CAAQ;AAAA,+CACPC,CAAS;AAAA;AAAA;AAAA;AAAA,UAKnD,EACA,KAAK,EAAE,EAGV,GAFAR,EAAQ,UAAYC,EAEhBF,EAAK,SAAW,EAClB,OAAAU,IACOC,EAAW,EAEH,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,YAAa,MACb,eAAgB,QACjB,CAAA,EAAE,QAAU,EACbF,GACF,CACO,SAASG,GAAc,CAC5B,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CACO,SAASJ,GAAc,CAC5B,MAAMI,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CACO,SAASH,GAAc,CAC5BI,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,MAAO,GACP,QACE,0EACN,CAAG,CACH,CACO,SAASC,GAAgB,CAC9BD,EAAS,QAAQ,CACf,MAAO,UACP,SAAU,WACV,MAAO,GACP,QAAS,8DACT,gBAAiB,OACjB,WAAY,QACZ,aAAc,OAClB,CAAG,CACH,CCzEO,eAAeE,EAAYC,EAAOC,EAAM,CAE7C,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAPa,GAQb,KAAMC,CACV,EACE,GAAI,CAIF,OAHiB,MAAME,EAAM,IAAI,2BAA4B,CAAE,OAAAD,CAAM,CAAE,GACjD,IAGvB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CCZA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDtB,EAAU,SAAS,cAAc,oBAAoB,EACrDuB,EAAgB,SAAS,cAAc,WAAW,EAExD,IAAIC,EAAe,GACfC,EAAc,EAElBH,EAAW,iBAAiB,SAAUI,CAAkB,EACxDH,EAAc,iBAAiB,QAASI,CAAe,EAEvD,eAAeD,EAAmBE,EAAK,CACrCA,EAAI,eAAc,EAClB,MAAMC,EAAOD,EAAI,cACXE,EAAaD,EAAK,SAAS,UAAU,MAAM,YAAW,EAAG,OAE/D,GAAIC,IAAe,GACjB,OAAArB,IACOC,EAAW,EAGpBE,IACAZ,EAAQ,UAAY,GACpBwB,EAAeM,EACfL,EAAc,EAEd,GAAI,CACF,MAAMM,EAAmB,MAAMf,EAAYQ,EAAcC,CAAW,EACpE3B,EAAciC,CAAgB,EAE9BR,EAAc,MAAM,QAAU,MAC/B,MAAa,CACZb,GACJ,QAAY,CACRmB,EAAK,MAAK,EACVpB,GACD,CACH,CACA,eAAekB,GAAkB,CAC/Bf,IACAa,GAAe,EACf,MAAMO,EAAY,GAAK,GACvB,GAAI,CACEP,IAAgBO,IAClBT,EAAc,MAAM,QAAU,OAC9BR,KAEF,MAAMgB,EAAmB,MAAMf,EAAYQ,EAAcC,CAAW,EACpE3B,EAAciC,CAAgB,EAC9B/B,EAAQ,eAAe,CAAE,SAAU,SAAU,MAAO,OAAO,CAAE,EAE7D,IAAIiC,EADgB,SAAS,cAAc,UAAU,EACnB,wBAClC,OAAO,SAAS,CACd,IAAKA,EAAgB,OAAS,EAC9B,KAAM,EACN,SAAU,QAChB,CAAK,CACF,MAAa,CACZvB,GACJ,QAAY,CACRD,GACD,CACH"}