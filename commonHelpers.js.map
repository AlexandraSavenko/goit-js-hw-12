{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function inputPictures({ hits }) {\n  const gallery = document.querySelector('.gallery-container');\n  const hitsList = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<ul class=\"gallery-card\">\n      <li class=\"gallery\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"> \n   <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"270\" height=\"160\"/>\n   </a>\n    <div class=\"discrabe\">\n  <ul class=\"discrabe-list\">\n  <li class=\"discrabe-item\"><b>Likes</b> ${likes}</li>\n  <li class=\"discrabe-item\"><b>Views</b> ${views}</li>\n  <li class=\"discrabe-item\"><b>Comments</b> ${comments}</li>\n  <li class=\"discrabe-item\"><b>Downloads</b> ${downloads}</li>\n  </ul>\n</div>\n</li>\n    </ul>`\n    )\n    .join('');\n  gallery.innerHTML = hitsList;\n  if (hits.length === 0) {\n    hideLoading();\n    return errorParams();\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionData: 'alt',\n    captionPosting: 'bottom',\n  }).refresh();\n  hideLoading();\n}\nexport function showLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'flex';\n}\nexport function hideLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'none';\n}\nexport function errorParams() {\n  iziToast.error({\n    title: 'Error',\n    position: 'topRight',\n    title: '',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\n\nexport async function fetchParams(item) {\n  let per_page = 15;\n  let page = 1;\n  const params = {\n    key: '44790874-b72b714502b79af1442269c5d',\n    q: item,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: per_page,\n    page: page,\n  };\n  try {\n    const response = await axios.get('https://pixabay.com/api/', { params });\n    const data = response.data;\n\n    page += 1;\n    const loadingButton = document.querySelector('.btn-load');\n    if (page > 1) {\n      loadingButton.style.display = 'flex';\n    }\n    const totalResult = Math.ceil(data.total / per_page);\n    if (page > totalResult) {\n      return iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n    return data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n","import {\n  inputPictures,\n  showLoading,\n  hideLoading,\n  errorParams,\n} from './js/render-functions';\nimport { fetchParams } from './js/pixabay-api';\nconst formSearch = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery-container');\nconst loadingButton = document.querySelector('.btn-load');\n\nformSearch.addEventListener('submit', getPicturesByValue);\nasync function getPicturesByValue(evt) {\n  evt.preventDefault();\n  const form = evt.currentTarget;\n  const inputValue = form.elements.inputtext.value.toLowerCase().trim();\n  if (inputValue === '') {\n    hideLoading();\n    return errorParams();\n  }\n  showLoading();\n  gallery.innerHTML = '';\n  try {\n    const picturesResponse = await fetchParams(inputValue);\n    inputPictures(picturesResponse);\n  } catch (err) {\n    errorParams();\n  } finally {\n    form.reset();\n  }\n}\nloadingButton.addEventListener('click', getMorePictures);\nfunction getMorePictures() {\n  console.log(loadingButton);\n}\n"],"names":["inputPictures","hits","gallery","hitsList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoading","errorParams","SimpleLightbox","showLoading","loading","iziToast","fetchParams","item","per_page","page","params","data","axios","loadingButton","totalResult","error","formSearch","getPicturesByValue","evt","form","inputValue","picturesResponse","getMorePictures"],"mappings":"owBAKO,SAASA,EAAc,CAAE,KAAAC,GAAQ,CACtC,MAAMC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAWF,EACd,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,sCAE8BL,CAAa;AAAA,eACpCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,2CAIEC,CAAK;AAAA,2CACLC,CAAK;AAAA,8CACFC,CAAQ;AAAA,+CACPC,CAAS;AAAA;AAAA;AAAA;AAAA,UAKnD,EACA,KAAK,EAAE,EAEV,GADAR,EAAQ,UAAYC,EAChBF,EAAK,SAAW,EAClB,OAAAU,IACOC,EAAW,EAEH,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,YAAa,MACb,eAAgB,QACjB,CAAA,EAAE,QAAU,EACbF,GACF,CACO,SAASG,GAAc,CAC5B,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CACO,SAASJ,GAAc,CAC5B,MAAMI,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CACO,SAASH,GAAc,CAC5BI,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,MAAO,GACP,QACE,0EACN,CAAG,CACH,CC5DO,eAAeC,EAAYC,EAAM,CACtC,IAAIC,EAAW,GACXC,EAAO,EACX,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUC,EACV,KAAMC,CACV,EACE,GAAI,CAEF,MAAME,GADW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,CAAM,CAAE,GACjD,KAEtBD,GAAQ,EACR,MAAMI,EAAgB,SAAS,cAAc,WAAW,EACpDJ,EAAO,IACTI,EAAc,MAAM,QAAU,QAEhC,MAAMC,EAAc,KAAK,KAAKH,EAAK,MAAQH,CAAQ,EACnD,OAAIC,EAAOK,EACFT,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,8CACjB,CAAO,EAEIM,CACR,OAAQI,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CC5BA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDzB,EAAU,SAAS,cAAc,oBAAoB,EACrDsB,EAAgB,SAAS,cAAc,WAAW,EAExDG,EAAW,iBAAiB,SAAUC,CAAkB,EACxD,eAAeA,EAAmBC,EAAK,CACrCA,EAAI,eAAc,EAClB,MAAMC,EAAOD,EAAI,cACXE,EAAaD,EAAK,SAAS,UAAU,MAAM,YAAW,EAAG,OAC/D,GAAIC,IAAe,GACjB,OAAApB,IACOC,EAAW,EAEpBE,IACAZ,EAAQ,UAAY,GACpB,GAAI,CACF,MAAM8B,EAAmB,MAAMf,EAAYc,CAAU,EACrD/B,EAAcgC,CAAgB,CAC/B,MAAa,CACZpB,GACJ,QAAY,CACRkB,EAAK,MAAK,CACX,CACH,CACAN,EAAc,iBAAiB,QAASS,CAAe,EACvD,SAASA,GAAkB,CACzB,QAAQ,IAAIT,CAAa,CAC3B"}